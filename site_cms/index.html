<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>SAFI Construction</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Poppins:wght@600;700&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fff;--ink:#0b1220;--slate:#334155;--blue:#0f3979;--mist:#F1F5F9;--max:1100px;--radius:16px;--shadow:0 8px 30px rgba(0,0,0,.06)}
    *{box-sizing:border-box} html,body{margin:0;padding:0;background:var(--bg);color:var(--ink)}
    body{font:16px/1.6 Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif}
    h1,h2,h3{font-family:Poppins,Inter,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.2;margin:0 0 .5rem}
    h1{font-size:clamp(32px,6vw,56px)} h2{font-size:clamp(24px,3.5vw,34px)} h3{font-size:20px} a{color:inherit;text-decoration:none}
    .btn{display:inline-block;padding:12px 18px;border-radius:12px;font-weight:700}
    .btn.primary{background:var(--blue);color:#fff} .btn.light{background:#fff;color:var(--blue);border:1px solid #e5e7eb}
    .container{max-width:var(--max);margin:0 auto;padding:0 20px} .grid{display:grid;gap:16px}
    @media(min-width:768px){.grid.cols-3{grid-template-columns:repeat(3,1fr)} .grid.cols-2{grid-template-columns:repeat(2,1fr)}}
    .card{border-radius:var(--radius);box-shadow:var(--shadow);padding:20px;background:#fff}
    header.sticky{position:sticky;top:0;background:rgba(255,255,255,.95);backdrop-filter:saturate(180%) blur(8px);border-bottom:1px solid #eee;z-index:10}
    nav{display:flex;align-items:center;justify-content:space-between;gap:16px;padding:10px 0} nav .right{display:flex;align-items:center;gap:16px;flex-wrap:wrap}
    .hero{background:linear-gradient(135deg, #0B1433, #0f3979);color:#fff} .hero .inner{min-height:60vh;display:grid;place-items:center;padding:60px 0}
    .section{padding:56px 0} .muted{color:#475569}
    .footer{background:#0f3979;color:#fff} .footer a{color:#fff}
    .project-img{width:100%;height:auto;border-radius:12px;display:block}
  </style>
</head>
<body>
  <header class="sticky">
    <div class="container">
      <nav>
        <a href="#home" style="display:flex;align-items:center;gap:10px">
          <img src="images/logo.jpg" alt="SAFI Construction logo" style="height:38px;width:auto;border-radius:8px"/>
          <strong id="brand">SAFI Construction</strong>
        </a>
        <div class="right">
          <a href="#services">Services</a>
          <a href="#projects">Projects</a>
          <a href="#crew">Crew</a>
          <a href="#about">About</a>
          <a href="#contact" class="btn primary">Get a Quote</a>
        </div>
      </nav>
    </div>
  </header>

  <main id="home">
    <section class="hero">
      <div class="container inner">
        <div>
          <h1 id="hero_title">Your trusted partner in Calgary</h1>
          <p id="hero_subtitle">Construction labor…</p>
          <div class="inline-list" style="margin:18px 0 6px">
            <a class="btn light" href="#contact">Get a Quote</a>
            <a class="btn light" href="#jobs">Join Our Crew</a>
          </div>
        </div>
      </div>
    </section>

    <section id="services" class="section">
      <div class="container">
        <h2>Services</h2>
        <div id="services_list" class="grid cols-2" style="margin-top:14px"></div>
      </div>
    </section>

    <section id="projects" class="section">
      <div class="container">
        <h2>Recent Projects</h2>
        <div id="projects_grid" class="grid cols-3" style="margin-top:14px"></div>
      </div>
    </section>

    <section id="crew" class="section">
      <div class="container">
        <h2>Our Crew</h2>
        <div id="crewGrid" class="grid cols-3" style="margin-top:14px"></div>
      </div>
    </section>

    <section id="about" class="section" style="background:#F1F5F9">
      <div class="container">
        <h2>Contact</h2>
        <p><strong>Email:</strong> <a id="email" href="#">email</a></p>
        <p><strong>Phone:</strong> <a id="phone" href="#">phone</a></p>
        <p><strong>Location:</strong> <span id="location"></span></p>
        <p><strong>Hours:</strong> <span id="hours"></span></p>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container section" style="padding:24px 20px">
      <div class="grid cols-2">
        <div><h3>SAFI Construction</h3><p>© <span id="year"></span> SAFI. All rights reserved.</p></div>
        <div><p><a id="footer_email" href="#"></a> · <a id="footer_phone" href="#"></a></p></div>
      </div>
    </div>
  </footer>

  <script>
    document.getElementById('year').textContent = new Date().getFullYear();

    async function loadJSON(path){ const r = await fetch(path); if(!r.ok) return null; return r.json(); }

    (async function(){
      const site = await loadJSON('data/site.json');
      const services = await loadJSON('data/services.json');
      const projects = await loadJSON('data/projects.json');
      const workers = await loadJSON('data/workers.json');

      if(site){
        document.getElementById('brand').textContent = site.brand_name || 'SAFI Construction';
        document.getElementById('hero_title').textContent = site.hero_title || '';
        document.getElementById('hero_subtitle').textContent = site.hero_subtitle || '';
        document.getElementById('email').textContent = site.email; document.getElementById('email').href = 'mailto:' + site.email;
        document.getElementById('phone').textContent = site.phone_display; document.getElementById('phone').href = 'tel:' + site.phone_tel;
        document.getElementById('footer_email').textContent = site.email; document.getElementById('footer_email').href = 'mailto:' + site.email;
        document.getElementById('footer_phone').textContent = site.phone_display; document.getElementById('footer_phone').href = 'tel:' + site.phone_tel;
        document.getElementById('location').textContent = site.location || '';
        document.getElementById('hours').textContent = site.hours || '';
      }

      if(Array.isArray(services)){
        const left = services.slice(0,3), right = services.slice(3);
        const col = (items)=>'<div class="card"><ul>'+items.map(s=>'<li><strong>'+s.title+'</strong> — '+s.desc+'</li>').join('')+'</ul></div>';
        document.getElementById('services_list').innerHTML = col(left) + col(right);
      }

      if(Array.isArray(projects)){
        document.getElementById('projects_grid').innerHTML = projects.map(p=>'<figure class="card"><img class="project-img" src="'+p.image+'" alt="'+(p.title||'Project')+'"><figcaption>'+(p.title||'')+'</figcaption></figure>').join('');
      }

      if(Array.isArray(workers)){
        document.getElementById('crewGrid').innerHTML = workers.map(w=>{
          const img = w.photo ? '<img src="'+w.photo+'" alt="'+w.name+' — '+w.trade+'" style="width:100%;border-radius:12px;margin-bottom:10px">' : '';
          const meta = [w.experience? (w.experience + ' yrs') : '', w.certs||'', w.cities||''].filter(Boolean).join(' • ');
          return '<div class="card">'+img+'<h3>'+w.name+' — '+w.trade+'</h3><p class="muted">'+meta+'</p></div>';
        }).join('');
      }
    })();
  </script>
</body>
</html>
